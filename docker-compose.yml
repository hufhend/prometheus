version: "3.7"

services:
  prometheus:
    image: prom/prometheus
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - "$PWD/prometheus/etc/prometheus:/etc/prometheus"
      - "$PWD/prometheus/data:/prometheus"
    restart: always

  alertmanager:
    image: prom/alertmanager
    container_name: alertmanager
    ports:
      - "9093:9093"
    volumes:
      - "$PWD/alertmanager/etc/alertmanager:/etc/alertmanager"
      - "$PWD/alertmanager/data:/alertmanager"
    restart: always

  grafana:
    image: grafana/grafana
    container_name: grafana
    volumes:
      - "$PWD/grafana/data:/var/lib/grafana"
    expose:
      - "3000"
    restart: always

networks:
  default:
    external: true
    name: prometheus
